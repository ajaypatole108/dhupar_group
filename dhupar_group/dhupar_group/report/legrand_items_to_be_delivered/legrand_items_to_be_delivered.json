{
 "add_total_row": 1,
 "columns": [],
 "creation": "2021-08-02 12:01:12.983530",
 "disable_prepared_report": 1,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "letter_head": "Default",
 "modified": "2023-10-18 18:18:15.639546",
 "modified_by": "Administrator",
 "module": "Dhupar Group",
 "name": "Legrand Items To Be Delivered",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "select \r\n `tabSales Order`.`name` as \"Sales Order:Link/Sales Order:120\",\r\n `tabSales Order`.`po_no` as \"Customer Po.No:200\",\r\n `tabSales Order`.`po_date` as \"Customer Po.Date:Date\",\r\n `tabSales Order`.`customer` as \"Customer:Link/Customer:120\",\r\n `tabSales Order`.`transaction_date` as \"Date:Date\",\r\n `tabSales Order Item`.item_code as \"Item:Link/Item:120\",\r\n `tabSales Order Item`.description as \"Description::200\",\r\n `tabSales Order Item`.qty as \"Qty:Float:140\",\r\n (select rsi.reserve_qty from `tabReservation Schedule Item` rsi JOIN `tabReservation Schedule` rs ON rs.name = rsi.parent WHERE rs.parent_warehouse in(\"WAGHOLI BIN RACK - DBTPL\", \"PUNE BIN RACK - DBTPL\") AND `tabSales Order Item`.item_code = rsi.item_code  AND rsi.so_item_name = `tabSales Order Item`.name AND rs.status = 'Open') as \"Reserve Qty:Float:140\",\r\n  `tabSales Order Item`.delivered_qty as \"Delivered Qty:Float:140\",\r\n(`tabSales Order Item`.qty - ifnull(`tabSales Order Item`.delivered_qty, 0)) as \"Qty to Deliver:Float:140\",\r\n `tabSales Order Item`.base_rate as \"Rate:Float:140\",\r\n`tabSales Order Item`.gst_hsn_code as \"HSN\",\r\n\r\n( SELECT CASE WHEN(\r\nSELECT CASE WHEN (\r\n(\r\n    SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse not LIKE \"WC - DBTPL%%\" and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN  `tabReservation Schedule` as rs\r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n(\r\n    SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse not LIKE \"WC - DBTPL%%\" and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN  `tabReservation Schedule` as rs\r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END) IS NULL THEN 0 ELSE((\r\nSELECT CASE WHEN (\r\n(\r\n    SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse not LIKE \"WC - DBTPL%%\" and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN  `tabReservation Schedule` as rs\r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n(\r\n    SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse not LIKE \"WC - DBTPL%%\" and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN  `tabReservation Schedule` as rs\r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"WAGHOLI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END))END) as \"Wagholi Stock:Float:140\",\r\n\r\n (SELECT CASE WHEN(\r\nSELECT CASE WHEN (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PUNE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0  WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi \r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PUNE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PUNE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0  WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi \r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PUNE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END)IS NULL THEN 0 ELSE((\r\nSELECT CASE WHEN (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PUNE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0  WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi \r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PUNE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PUNE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0  WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi \r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PUNE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END))END) as \"Pune Stock:Float:140\",\r\n \r\n \r\n (SELECT CASE WHEN (\r\nSELECT CASE WHEN (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\" ) and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END)IS NULL THEN 0 ELSE((\r\nSELECT CASE WHEN (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\" ) and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        SELECT SUM(tabBin.actual_qty) FROM tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"PIMPRI BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END))END) as \"Pimpri Stock:Float:140\",\r\n        \r\n        \r\n(SELECT CASE WHEN (\r\nSELECT CASE WHEN (\r\n    (\r\n        select SUM(tabBin.actual_qty) from tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        select SUM(tabBin.actual_qty) from tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END)IS NULL THEN 0 ELSE((\r\nSELECT CASE WHEN (\r\n    (\r\n        select SUM(tabBin.actual_qty) from tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open')\r\n) < 0 THEN 0\r\nELSE (\r\n    (\r\n        select SUM(tabBin.actual_qty) from tabBin WHERE tabBin.actual_qty <> 0 and tabBin.warehouse in (select name from tabWarehouse WHERE tabWarehouse.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\") and tabBin.item_code = `tabSales Order Item`.item_code\r\n    ) - (\r\n        SELECT CASE WHEN SUM(rsi.reserve_qty) IS NULL THEN 0 WHEN SUM(rsi.reserve_qty) < 0 THEN 0 ELSE SUM(rsi.reserve_qty) END\r\n        FROM `tabReservation Schedule Item` as rsi\r\n        JOIN `tabReservation Schedule` as rs \r\n        ON rsi.parent = rs.name\r\n        WHERE rsi.item_code = `tabSales Order Item`.item_code\r\n        AND rs.parent_warehouse = \"MAHAPE BIN RACK - DBTPL\"\r\n        AND rs.status = 'Open'))END))END) as \"Mahape Stock:Float:140\",\r\n \r\n \r\n `tabSales Order Item`.item_group as \"Item Group:Link/Item Group:120\",\r\n `tabSales Order`._assign as \"Assigned to::200\"\r\n from `tabSales Order` JOIN `tabSales Order Item` on  `tabSales Order Item`.`parent` = `tabSales Order`.`name`\r\n JOIN `tabItem Group` on `tabItem Group`.name = `tabSales Order Item`.item_group \r\n where (`tabItem Group`.parent_item_group like \"%%Legrand%%\" or `tabItem Group`.name like '%%Legrand%%') and `tabSales Order`.docstatus = 1 and `tabSales Order`.status not in (\"Stopped\", \"Closed\") and ifnull(`tabSales Order Item`.delivered_qty,0) < ifnull(`tabSales Order Item`.qty,0)\r\n\r\norder by `tabSales Order`.transaction_date asc",
 "ref_doctype": "Sales Order",
 "report_name": "Legrand Items To Be Delivered",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Stock User"
  },
  {
   "role": "Stock Manager"
  },
  {
   "role": "Sales User"
  },
  {
   "role": "Accounts User"
  }
 ]
}